.obsidian-assistant-view { padding: 0; }
.assistant-container { height: 100%; display: flex; flex-direction: column; }
.assistant-header { padding: 10px 12px; border-bottom: 1px solid var(--background-modifier-border); display: flex; flex-direction: column; gap: 8px; }
.assistant-header-top { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
.assistant-title { font-weight: 600; font-size: 14px; }
.assistant-status { font-size: 11px; color: var(--text-muted); padding: 2px 8px; border-radius: 999px; background: var(--background-modifier-hover); border: 1px solid transparent; }
.assistant-status[data-state="online"] { color: var(--text-accent); border: 1px solid var(--text-accent); }
.assistant-status[data-state="offline"] { color: var(--text-error); border: 1px solid var(--text-error); }
.assistant-status[data-state="connecting"] { color: var(--text-muted); }
.assistant-settings-toggle { font-size: 11px; }
.assistant-header-bottom { display: flex; align-items: center; justify-content: space-between; gap: 8px; flex-wrap: wrap; }

.assistant-mode-group { display: flex; align-items: center; gap: 8px; }
.assistant-mode-label { font-size: 11px; text-transform: uppercase; letter-spacing: 0.08em; color: var(--text-muted); }
.assistant-mode-buttons { display: flex; border: 1px solid var(--background-modifier-border); border-radius: 999px; overflow: hidden; }
.assistant-mode-btn { border: none; background: transparent; padding: 4px 10px; font-size: 12px; color: var(--text-muted); cursor: pointer; }
.assistant-mode-btn:hover { background: var(--background-modifier-hover); color: var(--text-normal); }
.assistant-mode-btn.is-active { background: var(--text-accent); color: var(--background-primary); }

.assistant-session { display: flex; gap: 8px; align-items: center; flex: 1; min-width: 220px; }
.assistant-session-label { font-size: 11px; text-transform: uppercase; letter-spacing: 0.08em; color: var(--text-muted); }
.assistant-session-select { flex: 1; min-width: 140px; }
.assistant-session-new { font-size: 12px; }

.assistant-chat { flex: 1; overflow-y: auto; padding: 10px 12px; display: flex; flex-direction: column; gap: 10px; }
.assistant-row { display: flex; gap: 8px; align-items: flex-start; }
.assistant-row-user { justify-content: flex-end; }
.assistant-row-assistant { justify-content: flex-start; }
.assistant-avatar { width: 64px; height: 64px; border-radius: 14px; background-image: var(--bev-sprite); background-size: 300% 300%; background-repeat: no-repeat; background-position: 0 0; flex: 0 0 64px; box-shadow: 0 4px 10px rgba(0,0,0,0.12); }
.assistant-avatar.bev-pose-0 { background-position: 0% 0%; }
.assistant-avatar.bev-pose-1 { background-position: 50% 0%; }
.assistant-avatar.bev-pose-2 { background-position: 100% 0%; }
.assistant-avatar.bev-pose-3 { background-position: 0% 50%; }
.assistant-avatar.bev-pose-4 { background-position: 50% 50%; }
.assistant-avatar.bev-pose-5 { background-position: 100% 50%; }
.assistant-avatar.bev-pose-6 { background-position: 0% 100%; }
.assistant-avatar.bev-pose-7 { background-position: 50% 100%; }
.assistant-avatar.bev-pose-8 { background-position: 100% 100%; }
.assistant-row-assistant .assistant-msg { max-width: calc(100% - 72px); }
.assistant-row-user .assistant-msg { margin-left: auto; }
.assistant-row-assistant .assistant-msg { margin-right: auto; }
.assistant-row.assistant-pending .assistant-msg { opacity: 0.7; font-style: italic; }
.assistant-msg { margin: 0; padding: 10px 12px; border-radius: 12px; max-width: 92%; border: 1px solid transparent; box-shadow: 0 1px 0 rgba(0,0,0,0.04); }
.assistant-msg.assistant-user { background: var(--background-modifier-hover); border-color: var(--text-accent); margin-left: auto; }
.assistant-msg.assistant-assistant { background: var(--background-secondary); border-color: var(--background-modifier-border); margin-right: auto; }
.assistant-role { font-size: 10px; letter-spacing: 0.08em; text-transform: uppercase; color: var(--text-muted); margin-bottom: 4px; }
.assistant-msg.assistant-user .assistant-role { color: var(--text-accent); }
.assistant-text { white-space: normal; user-select: text; word-break: break-word; }
.assistant-text > *:first-child { margin-top: 0; }
.assistant-text > *:last-child { margin-bottom: 0; }
.assistant-text p { margin: 0 0 0.6em; }
.assistant-text ul, .assistant-text ol { margin: 0.4em 0 0.4em 1.2em; }
.assistant-text code { font-family: var(--font-monospace); }
.assistant-msg.assistant-user .assistant-text { font-weight: 600; }
.assistant-meta { font-size: 11px; color: var(--text-muted); margin-top: 6px; }
.assistant-copy { opacity: 0; transition: opacity 0.15s ease; }
.assistant-msg:hover .assistant-copy { opacity: 1; }
.assistant-feedback { margin-top: 8px; display: flex; align-items: center; gap: 8px; font-size: 11px; color: var(--text-muted); }
.assistant-feedback-label { color: var(--text-muted); }
.assistant-feedback-btn { font-size: 11px; padding: 2px 8px; border-radius: 999px; border: 1px solid var(--background-modifier-border); background: var(--background-secondary); }
.assistant-feedback-btn:disabled { opacity: 0.6; cursor: not-allowed; }
.assistant-feedback-done { color: var(--text-accent); margin-left: auto; }

.assistant-form { padding: 10px 12px; border-top: 1px solid var(--background-modifier-border); display: grid; gap: 10px; }
.assistant-input { width: 100%; min-height: 70px; }
.assistant-container.is-editing .assistant-input { border-color: var(--text-accent); box-shadow: 0 0 0 1px rgba(var(--text-accent-rgb), 0.2); }
.assistant-toolbar { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; font-size: 12px; color: var(--text-muted); }
.assistant-toggle { display: inline-flex; align-items: center; gap: 6px; padding: 4px 8px; border-radius: 999px; border: 1px solid var(--background-modifier-border); background: var(--background-secondary); }
.assistant-toggle input { margin: 0; }

.assistant-active-note { display: flex; align-items: center; gap: 8px; font-size: 12px; color: var(--text-muted); }
.assistant-active-label { font-size: 11px; text-transform: uppercase; letter-spacing: 0.08em; color: var(--text-muted); }
.assistant-active-name { font-family: var(--font-monospace); color: var(--text-normal); max-width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.assistant-active-note.is-empty .assistant-active-name { color: var(--text-faint); }

.assistant-file-row { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; font-size: 12px; color: var(--text-muted); }
.assistant-file-label { font-size: 11px; text-transform: uppercase; letter-spacing: 0.08em; color: var(--text-muted); }
.assistant-file-name { font-family: var(--font-monospace); color: var(--text-normal); }
.assistant-file-change { font-size: 11px; }
.assistant-path-wrap { flex: 1 1 100%; }
.assistant-path { width: 100%; min-width: 220px; }

.assistant-settings { margin-top: 4px; padding: 10px; border: 1px solid var(--background-modifier-border); border-radius: 10px; display: grid; gap: 8px; font-size: 12px; background: var(--background-primary-alt); }
.assistant-settings-row { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
.assistant-settings-label { font-size: 11px; text-transform: uppercase; letter-spacing: 0.08em; color: var(--text-muted); min-width: 70px; }
.assistant-settings-toggles { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }
.assistant-select { min-width: 150px; }

.assistant-footer { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
.assistant-hint { font-size: 11px; color: var(--text-muted); }
.assistant-send { justify-self: end; }
.assistant-send:disabled { opacity: 0.6; cursor: not-allowed; }

.assistant-diff { background: var(--background-secondary); padding: 8px; border-radius: 8px; overflow-x: auto; }
.assistant-actions { display: flex; gap: 8px; margin-top: 6px; }
.assistant-apply, .assistant-reject, .assistant-copy { font-size: 12px; }
